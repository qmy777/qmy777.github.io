<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="generator" content="Hexo 4.2.0"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>HTTP协议 - Dima109</title><meta description="HTTP简介 HTTP发展历程 什么是HTTP   HTTP技术 TCP分层管理 HTTP工作过程 URL和URI和URN HTTP状态码 HTTP传输基础 HTTP报文 断点续传 Content-Type - MIME 参考      HTTP简介HTTP发展历程 HTTP&amp;#x2F;0.9 - 1990年  HTTP&amp;#x2F;1.0 - 1996年 - 被记载于RFC1945  HTTP&amp;#x2F;1.1 - 19"><meta property="og:type" content="article"><meta property="og:title" content="HTTP协议"><meta property="og:url" content="https://blog.dima109.cn/2020/03/29/HTTP%E5%8D%8F%E8%AE%AE/"><meta property="og:site_name" content="浩克叮当的家"><meta property="og:description" content="HTTP简介 HTTP发展历程 什么是HTTP   HTTP技术 TCP分层管理 HTTP工作过程 URL和URI和URN HTTP状态码 HTTP传输基础 HTTP报文 断点续传 Content-Type - MIME 参考      HTTP简介HTTP发展历程 HTTP&amp;#x2F;0.9 - 1990年  HTTP&amp;#x2F;1.0 - 1996年 - 被记载于RFC1945  HTTP&amp;#x2F;1.1 - 19"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://cdn.jsdelivr.net/gh/qmy777/qmy777.github.io@latest/img/dima109-avatar.jpg"><meta property="article:published_time" content="2020-03-29T09:46:15.000Z"><meta property="article:modified_time" content="2020-03-30T18:48:24.237Z"><meta property="article:author" content="Dima"><meta property="article:tag" content="categories"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="https://cdn.jsdelivr.net/gh/qmy777/qmy777.github.io@latest/img/dima109-avatar.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.dima109.cn/2020/03/29/HTTP%E5%8D%8F%E8%AE%AE/"},"headline":"HTTP协议","image":["https://cdn.jsdelivr.net/gh/qmy777/qmy777.github.io@latest/img/dima109-avatar.jpg"],"datePublished":"2020-03-29T09:46:15.000Z","dateModified":"2020-03-30T18:48:24.237Z","author":{"@type":"Person","name":"Dima"},"description":"HTTP简介 HTTP发展历程 什么是HTTP   HTTP技术 TCP分层管理 HTTP工作过程 URL和URI和URN HTTP状态码 HTTP传输基础 HTTP报文 断点续传 Content-Type - MIME 参考      HTTP简介HTTP发展历程 HTTP&#x2F;0.9 - 1990年  HTTP&#x2F;1.0 - 1996年 - 被记载于RFC1945  HTTP&#x2F;1.1 - 19"}</script><link rel="alternative" href="/atom.xml" title="Dima109" type="application/atom+xml"><link rel="icon" href="https://cdn.jsdelivr.net/gh/qmy777/qmy777.github.io@latest/img/dima109-fav.png"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Ubuntu:400,600|Source+Code+Pro|Monda:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic|Microsoft YaHei:300,300italic,400,400italic,700,700italic|PT Mono:300,300italic,400,400italic,700,700italic&amp;amp;subset=latin,latin-ext|Inconsolata|Itim|Lobster.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-dark.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><!--!--><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.12/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><link rel="stylesheet" href="/css/style.css"><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="/js/globalUtils.js"></script><link rel="stylesheet" href="/live2d/waifu.css"><script type="text/javascript" async src="/live2d/autoload.js"></script></head><body class="is-3-column has-navbar-fixed-top"><nav class="navbar navbar-main is-fixed-top"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="https://cdn.jsdelivr.net/gh/qmy777/qmy777.github.io@latest/img/dima109-logo.png" alt="Dima109" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">首页</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/categories">分类</a><a class="navbar-item" href="/tags">标签</a><a class="navbar-item" href="/message">留言</a><a class="navbar-item" href="/about">关于</a></div><div class="navbar-end"><a class="navbar-item" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/qmy777"><i class="fab fa-github"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a><a class="navbar-item" id="night-nav" title="Night Mode" href="javascript:;"><i class="fas fa-moon" id="night-icon"></i></a></div></div></div></nav><script type="text/javascript" src="/js/theme-setting.js"></script><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-9-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta size-small is-uppercase level is-mobile"><div class="level-left"><time class="level-item" dateTime="2020-03-29T09:46:15.000Z">2020-03-29</time><a class="commentCountImg" href="/2020/03/29/HTTP%E5%8D%8F%E8%AE%AE/#comment-container"><span class="display-none-class">514cea57a6113e887f9e2747257131b2</span><img class="not-gallery-item" src="/img/chat.svg"> <span class="commentCount" id="514cea57a6113e887f9e2747257131b2"> 99+</span>    </a><span class="level-item"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/">网络原理</a></span><span class="level-item">41 分钟 读完 (大约 6178 个字)</span><span class="level-item" id="busuanzi_container_page_pv"><i class="far fa-eye"></i>&nbsp;&nbsp;<span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">HTTP协议</h1><div class="content"><!-- toc -->

<ul>
<li><a href="#http简介">HTTP简介</a><ul>
<li><a href="#http发展历程">HTTP发展历程</a></li>
<li><a href="#什么是http">什么是HTTP</a></li>
</ul>
</li>
<li><a href="#http技术">HTTP技术</a><ul>
<li><a href="#tcp分层管理">TCP分层管理</a></li>
<li><a href="#http工作过程">HTTP工作过程</a></li>
<li><a href="#url和uri和urn">URL和URI和URN</a></li>
<li><a href="#http状态码">HTTP状态码</a></li>
<li><a href="#http传输基础">HTTP传输基础</a></li>
<li><a href="#http报文">HTTP报文</a></li>
<li><a href="#断点续传">断点续传</a></li>
<li><a href="#content-type-mime">Content-Type - MIME</a></li>
<li><a href="#参考">参考</a></li>
</ul>
</li>
</ul>
<!-- tocstop -->

<h2><span id="http简介">HTTP简介</span></h2><h3><span id="http发展历程">HTTP发展历程</span></h3><ul>
<li><p>HTTP/0.9 - 1990年</p>
</li>
<li><p>HTTP/1.0 - 1996年 - 被记载于<a href="http://www.ietf.org/rfc/rfc1945.txt">RFC1945</a></p>
</li>
<li><p>HTTP/1.1 - 1997年 - 最初版本RFC2068 - 最终修订为<a href="http://www.ietf.org/rfc/rfc2616">RFC2616</a></p>
</li>
<li><p>HTTP/2.0 - 2013年</p>
<ul>
<li>多路复用 就是多个请求都是通过一个TCP连接并发完成；而HTTP/1.1虽然能通过pipeline并发请求，但多个请求之间的响应会被阻塞</li>
<li>HEAD压缩 2.0会对HEADER采用<a href="http://www.phperz.com/article/15/1231/179520.html">HPACK</a>进行压缩传输,该压缩算法能够节省消息头占用的网络流量</li>
<li>服务器推送 服务器端能够更快的把资源推送给客户端，例如server主动把JS和CSS文件推送给客户端，而不需要客户端解析HTML再发送这些请求。<a href="http://www.wtoutiao.com/p/id6IWb.html">详情</a></li>
<li>二进制传输数据而非文本格式，而非http1.1的文本格式</li>
</ul>
</li>
</ul>
<a id="more"></a>

<h3><span id="什么是http">什么是HTTP</span></h3><ul>
<li><p>HyperText Transfer Protocol：超文本传输协议（严格是 <a href="http://www.ics.uci.edu/~fielding/pubs/dissertation/evaluation.htm#sec_6_5_3">超文本转移协议</a>）</p>
</li>
<li><p>基于TCP/IP协议基础上运作</p>
</li>
<li><p>3项WWW构建技术</p>
<ul>
<li><p>把SGML(Standard Generalized Markup Language, 标准通用标记语言)作为页面的文本标记语言的HTML(HyperText Markup Language, 超文本标记语言)</p>
</li>
<li><p>作为文档传递协议的HTTP</p>
</li>
<li><p>指定文档所在地址的URL(Uniform Resource Locator, 统一资源定位符)</p>
</li>
</ul>
</li>
</ul>
<h2><span id="http技术">HTTP技术</span></h2><h3><span id="tcp分层管理">TCP分层管理</span></h3><ul>
<li><p>应用层</p>
<ul>
<li>决定了向用户提供应用服务时通信的活动</li>
<li>TCP/IP协议族内预存了各类通用的应用服务。如，TFP(File Transfer Protocol, 文件传输协议)和DNS(Domain Name System, 域名系统)服务就是其中两类。</li>
<li>HTTP协议也处于该层</li>
<li>协议：HTTP, FTP, SMTP, DNS Telnet</li>
</ul>
</li>
<li><p>传输层</p>
<ul>
<li>该层对上层应用层，提供处于网络连接中的两台计算机之间的数据传输。</li>
<li>在传输层有两个性质不同的协议: TCP(Transmission Control Protocol, 传输控制协议)和UDP(User Data Protocal, 用户数据报协议)</li>
</ul>
</li>
<li><p>网络层(又名网络互联层)</p>
<ul>
<li>用来处理在网络上流动的数据包。</li>
<li>数据包是网络传输的最小数据单位。</li>
<li>规定了通过怎样的路径(所谓的传输路线)到达对方计算机，并把数据包传送给对方。</li>
<li>在众多的选项内选择一条传输路线</li>
<li>协议：IP</li>
</ul>
</li>
<li><p>链路层(又名数据链路层，网络接口层)</p>
<ul>
<li>用来处理连接网络硬件部分。包括控制操作系统、硬件的设备驱动、NIC(Network Interface Card, 网路适配器)，及光纤等物理可见部分(还包括一切传输没接)</li>
<li>硬件上的范畴均在链路层的作用范围之内</li>
<li>协议：ARP(Address Resolution Protocal, 地址解析协议)</li>
</ul>
</li>
<li><p>物理层</p>
<ul>
<li>以二进制的方式被传输在 光纤，网线中</li>
<li>协议：ISO2110, IEEE802</li>
</ul>
</li>
<li><p>该分层属于TCP/IP协议族的规则，而七层协议是OSI(Open System Interconnect)</p>
<ul>
<li>TCP中的应用层包含了OSI中的应用层，表示层，会话层<ul>
<li>应用层<ul>
<li>操作系统或网络应用程序提供访问网络服务的接口</li>
<li>协议: Telnet、FTP、HTTP</li>
</ul>
</li>
<li>表示层<ul>
<li>解决用户信息的语法表示问题，将用户传输的数据转换为适合OSI系统内部使用的传送语法</li>
<li>协议: 无</li>
</ul>
</li>
<li>会话层<ul>
<li>不参与具体的传输，只提供包括访问验证和会话管理在内的建立和维护应用之间通信的机制。如 服务器验证用户登录便是会话层完成的</li>
<li>协议: 无</li>
</ul>
</li>
</ul>
</li>
<li>OSI七层参考模型的各个分层的划分遵循4个原则：<ol>
<li>同一层中的各网络节点都有相同的层次结构，具有同样的功能。</li>
<li>统一节点内相邻层之间通过接口(可以是逻辑接口)进行通信</li>
<li>七层结构中的每一层使用下一层提供的服务，并且向上层提供服务</li>
<li>不同节点的同等层按照协议实现对等层之间的通信</li>
</ol>
</li>
<li>OSI与TCP/IP的区别<ol>
<li>TCP/IP协议中的应用层处理开放式系统互联模型中的第五层、第六层和第七层的功能</li>
<li>TCP/IP协议的传输层不能总是保证在传输层可靠地传输数据包，而开发式系统互联模型可以做到。因为TCP/IP协议提供了一项名为UDP(用户数据报协议)的选择。UDP不能保证可靠的数据包传输</li>
</ol>
</li>
</ul>
</li>
</ul>
<h3><span id="http工作过程">HTTP工作过程</span></h3><ol>
<li><p>地址解析 </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">客户端浏览器请求这个页面: http:&#x2F;&#x2F;localhost.com:8080&#x2F;index.html</span><br><span class="line">首先从中解出协议名、主机名、端口、对象路径等部分，结果如下：</span><br><span class="line">协议名：http</span><br><span class="line">主机名：localhost.com</span><br><span class="line">端口：8080</span><br><span class="line">对象路径：&#x2F;index.html</span><br><span class="line">接着，域名系统DNS解析域名localhost.com，得到主机的IP地址</span><br></pre></td></tr></table></figure>
</li>
<li><p>封装成一个HTTP请求数据包</p>
</li>
<li><p>分装成TCP包，并建立TCP连接（TCP的三次握手）</p>
<ul>
<li>客户机(Web浏览器)首先要通过网络与服务器建立连接，该连接是通过TCP来完成的，该协议与IP协议共同构建Internet，即注明的TCP/IP协议族。</li>
<li>HTTP是比TCP更高层次的应用层协议，根据规则，只有底层协议建立之后才能进行更高层协议的连接</li>
<li>所以，首先要建立TCP连接，一般TCP连接的端口号是80 这里是8080端口</li>
</ul>
</li>
<li><p>客户端发送请求命令</p>
</li>
<li><p>服务器响应客户端，并做出响应 而响应头中的Content-Type属性决定了客户端该如何去展现接收到的数据</p>
</li>
<li><p>服务器关闭TCP连接 在服务器响应完毕后，便会关闭TCP连接；如果浏览器在请求头中添加了Connection: keep-alive，则TCP连接在发送后仍然会保持开启状态，浏览器便可以继续通过相同的连接发送请求。保持连接节省了为每个请求建立新连接所需的时间，还节约了网络宽带</p>
</li>
</ol>
<ul>
<li><p>客户端发起一次请求后</p>
</li>
<li><p>最大传输单元 MTU Maximum Transimission Unit (以太网)数据链路层发送的数据大小最大可以承受的大小 1500 bits(不同网络类型不同的MTU)；最小是 46 bits  超出部分会分多次进行传输</p>
<ul>
<li>TCP/UDP包头 20 bits</li>
<li>IP包头 20 bits</li>
<li>MAC地址 LLC子层 14 bits 不算入MTU中</li>
<li>FCS 4bits 不算入MTU中</li>
</ul>
</li>
</ul>
<h3><span id="url和uri和urn">URL和URI和URN</span></h3><ul>
<li><p>URI：Uniform Resource Identifier 统一资源标识符</p>
<ul>
<li>Uniform：规定统一的格式可方便处理多种不同类型的资源，而不用根据上下文环境来识别资源指定的访问方式。</li>
<li>Resource：“可标识的任何东西”。<ul>
<li>除了文档文件、图像或服务等能够区别于其他类型的，全都可作为资源。</li>
<li>资源不仅可以使单一的，也可以是多数的集合体。</li>
</ul>
</li>
<li>Identifier：可标识的对象。也称为标识符</li>
<li>就是由某个协议方案表示的资源的定位标识符。</li>
<li>完全的一个抽象概念，而非一个实体的存在；与其说是统一资源标识符，不如说是一个字符串</li>
</ul>
</li>
<li><p>URL：Uniform Resource Location 统一资源定位符</p>
<ul>
<li>URL是URI中的一个子集</li>
</ul>
</li>
<li><p>URN：Uniform Resource Name 统一资源名称</p>
</li>
<li><p>URI的格式：</p>
<ul>
<li>协议方案是指访问资源所使用的协议类型名称。比如，采用HTTP协议时，协议方案就是http。其它还有ftp, mailto, telnet, file等；标准的URI协议方案有30种左右。</li>
<li>登录信息(认证)<ul>
<li>指定用户名和密码作为从服务器端获取资源时必要的登录信息(身份认证)。</li>
</ul>
</li>
<li>服务器地址<ul>
<li>使用绝对URI必须指定待访问的服务器地址。</li>
</ul>
</li>
<li>服务器端口号<ul>
<li>指定服务器连接的网络端口号。</li>
<li>此项可选，若用户省略则自动使用默认端口号</li>
</ul>
</li>
<li>带层次的文件路径<ul>
<li>指定服务器上的文件路径来定位特指的资源</li>
<li>与UNIX系统的文件目录结构相似</li>
</ul>
</li>
<li>查询字符串<ul>
<li>针对已指定的文件路径内的资源，可以使用查询字符串传入任意参数。</li>
</ul>
</li>
<li>片段标识符<ul>
<li>使用片段标识符通常可标记出已获取资源中的子资源(文档内的某个位置)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3><span id="http状态码">HTTP状态码</span></h3><ul>
<li>1XX Informational(信息状态码) 接收的请求正在处理</li>
<li>2XX Success(成功状态码) 请求正常处理完毕<ul>
<li>200 OK</li>
<li>204 No Content 不返回任何主体部分</li>
<li>206 Partial Content 返回客户端指定的部分资源</li>
</ul>
</li>
<li>3XX Redirection(重定向状态码) 需要进行附加操作以完成请求<ul>
<li>301 Moved Permanently 永久性重定向 该资源被分配了新的URI</li>
<li>302 Found 临时性重定向 其它与301一致</li>
<li>303 See Other 由于请求对应的资源存在着一个URI，应使用GET方法定向获取请求的<br>资源。基本与302一致，只是这里明确表示客户端应当采用GET方法。</li>
<li>当301、302、302响应状态码返回时，几乎所有的浏览器都会把POST改成GET，并删除请求报文内的主体，之后请求会自动再次发送。</li>
<li>304 Not Modified 表示客户端发送附件带条件的请求时，服务器端允许请求访问资源，但为满足条件的情况。并不包含任何响应的主体部分。同时与重定向没有关系</li>
</ul>
</li>
<li>4XX Client Error(客户端错误状态码) 服务器无法处理请求<ul>
<li>400 Bad Request 请求报文中存在语法错误</li>
<li>401 Unauthorized 发送的请求需要有通过HTTP认证的认证信息。</li>
<li>403 Forbidden 请求资源的访问被服务器拒绝 未获得文件系统的访问授权，访问权限出问题了</li>
<li>404 Not Found 服务器上没有请求的资源</li>
</ul>
</li>
<li>5XX Server Error(服务器错误状态码) 服务器处理请求出错<ul>
<li>500 Internal Server Error 服务器端在执行请求时发生了错误，也有可能是Web应用存在的bug或某些临时的故障</li>
<li>503 Service Unavailable 表明服务器暂时处理超负载或正在进行停机维护，现在无法请求。</li>
</ul>
</li>
</ul>
<h3><span id="http传输基础">HTTP传输基础</span></h3><ul>
<li>请求必定由客户端发出，而服务端回复响应</li>
<li>请求报文<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#x2F;&#x2F; GET表示请求访问服务器的类型，称为方法(method)</span><br><span class="line">&#x2F;&#x2F; &#x2F;index.htm指明了请求访问的资源对象，也叫作请求URI(request-URI)</span><br><span class="line">&#x2F;&#x2F; HTTP&#x2F;1.1, 即HTTP的版本号，用来提示客户端使用的HTTP协议功能</span><br><span class="line">GET &#x2F;index.htm HTTP&#x2F;1.1</span><br><span class="line">Host: hackr.jp</span><br></pre></td></tr></table></figure></li>
<li>HTTP是不保存状态的协议，即无状态(stateless)协议。HTTP协议自身不对请求和响应之间的通信状态进行保存。也就是说，协议对于发送过的请求或响应都不做持久化处理</li>
<li>告知服务器意图的HTTP方法<ul>
<li>GET: 获取资源 请求访问已被URI识别的资源<ul>
<li>指定的资源经服务器端解析后返回响应内容</li>
<li>1.0 1.1</li>
</ul>
</li>
<li>POST: 传输实体主体<ul>
<li>与GET方法类似，但GET不用于传输主体</li>
<li>1.0 1.1</li>
</ul>
</li>
<li>PUT: 传输文件 <ul>
<li>类似于FTP协议的文件上传；但任何人都可以上传文件，存在安全问题</li>
<li>1.0 1.1</li>
</ul>
</li>
<li>HEAD: 获得报文首部<ul>
<li>与GET方法类似，只是不反悔报文主体部分。</li>
<li>1.0 1.1</li>
</ul>
</li>
<li>DELETE: 删除文件<ul>
<li>与PUT方法相反；DELETE方法按请求URI删除指定的资源</li>
<li>1.0 1.1</li>
</ul>
</li>
<li>OPTIONS: 询问支持的方法<ul>
<li>查询针对请求URI指定的资源文件的方法</li>
<li>1.1</li>
</ul>
</li>
<li>TRACE: 追踪路径<ul>
<li>让Web服务器端将之前的请求通信还回给客户端</li>
<li>1.1</li>
</ul>
</li>
<li>CONNECT: 要求用隧道协议连接代理 <ul>
<li>要求在与代理服务器通信时建立隧道，实现用隧道协议进行TCP通信。</li>
<li>主要使用SSL(Secure Sockets Layer, 安全套接层)和TLS(Tansport Layer Security, 传输层安全)协议把通信内容加密后经网络隧道传输</li>
<li>CONNECT方法格式： Connect 代理服务器名: 端口号 HTTP版本</li>
<li>1.1</li>
</ul>
</li>
<li>此外 还有LINK和UNLINK方法，但已被HTTP/1.1废弃</li>
</ul>
</li>
</ul>
<h3><span id="http报文">HTTP报文</span></h3><ul>
<li><p>报文首部</p>
<ul>
<li><p>请求行：用于请求的方法，请求URI和HTTP版本</p>
</li>
<li><p>状态行：表明响应结果的状态码，原因短语和HTTP版本</p>
</li>
<li><p>首部字段：表示请求和响应的各种条件和属性的各类首部。一般有4种首部：</p>
<ul>
<li><p>通用首部(General) 请求报文和响应报文两方都会使用的首部</p>
<ul>
<li>Cache-Control 操作缓存的工作机制 该指令的值可查阅《图解HTTP》中P84-P91</li>
<li>Pragma 兼容以HTTP/1.0为基准的中间服务器 其它与Cache-Control一致</li>
<li>Connection<ul>
<li>在客户端发送请求和服务器返回响应内，使用该字段可以控制不再转发给代理的首部字段(即Hop-by-hop首部)</li>
<li>管理持久连接</li>
</ul>
</li>
<li>Date 创建HTTP报文的日期和时间</li>
<li>Transfer-Encoding 规定了传输报文主体时采用的编码方式</li>
<li>Warning, Trailer，Upgrade，Via等 可查看<a href="http://www.wtoutiao.com/p/11aknaP.html">HTTP通用首部字段类型详解</a></li>
</ul>
</li>
<li><p>请求首部(Request Header) 从客户端向服务端发送请求报文时使用的首部。补充了请求的附加内容、客户端信息、响应内容相关优先级等信息</p>
<ul>
<li>Accept 通知服务器，用户代理能够处理的媒体类型及媒体类型的相对优先级<ul>
<li>文本文件 text/html, text/plain, text/css…, application/xhtml+xml, application/xml</li>
<li>图片文件 image/jpeg, image/gif, image/png…</li>
<li>视频文件 video/mpeg, video/quicktime…</li>
<li>应用程序使用的二进制文件 application/octet-stream, application/zip…</li>
</ul>
</li>
<li>Accept-Encoding 告知服务器用户代理支持的内容编码及内容编码的优先级顺序。 值可以为 gzip, compress, deflate, identity</li>
<li>Host 告知服务器请求的资源所处的互联网主机名和端口号</li>
<li>Referer 告知服务器请求的原始资源的URI 可能会有安全问题，原始资源的URI中的查询字符串可能还有ID和密码等保密信息</li>
<li>User-Agent 创建请求的浏览器和用户代理名称等信息 经过中间服务器时也可能被添加上代理服务器的名称</li>
<li>其它可查阅<a href="http://sanwen.net/a/tndqqoo.html">HTTP请求首部字段类型详解</a></li>
</ul>
</li>
<li><p>响应首部(Response Header) 从服务端向客户端返回响应报文时使用的首部。补充了响应的附加内容，也会要求客户端附加额外的内容信息。</p>
<ul>
<li>Age 告知服务器，源服务器在多久前创建了响应 指缓存后的响应再次发起认证到认证完成的时间值。代理创建响应时必须加上首部字段Age</li>
<li>ETag 告知客户端实体标识。它是一种可将资源以字符串形式做唯一标识的方式。服务器会为每份资源分配对应的ETag值。<ul>
<li>强ETag值 不论实体发生多么细微的变化都会改变其值</li>
<li>弱ETag值 只用于提示资源是否相同。只有资源发生了根本改变，产生差异时才会改变其值；这时，会在字段值最开始处附加 W/</li>
</ul>
</li>
<li>Location 将响应接收方引导至某个与请求URI位置不同的资源；该字段会配合3xx:Redirection的响应，提供重定向的URI</li>
<li>Server 告知客户端当前服务器上安装的HTTP服务器应用程序的信息</li>
<li>Vary 对缓存进行控制。源服务器会向代理服务器传达关于本地缓存使用方法的命令。</li>
<li>其它可查阅<a href="http://www.wtoutiao.com/p/1bdkh90.html">HTTP响应首部字段类型详解</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<pre><code>    - 实体首部：针对请求报文和响应报文的实体部分使用的首部。补充了资源内容更新时间等实体有关的信息
        - Allow 用于通知客户端能够支持Request-URI指定资源的所有HTTP方法。当服务器接收到不支持的HTTP方法时，会以状态码405 Method Not Allowed作为响应返回。与此同时，还会把所有能支持的HTTP方法写入首部字段Allow后返回到客户端
        - Content-Encoding 告知客户端服务器对实体的主体部分选用的内容编码方式。内容编码是指在不丢失实体信息的前提下所进行的压缩 支持的编码与Accept-Encoding所支持的一致
        - Content-Length 表明了实体主体部分的大小(单位是字节)；如果对实体主体进行内容编码传输时，便不会再使用Content-Length字段
        - Content-Type 说明了实体主体内对象的媒介类型。与Accept一样，字段值用type/subtype形式赋值
        - Last-Modified 指明资源最终修改的时间。一般来说，这个值就是Request-URI指定资源被修改的时间。
- 为Cookie服务的首部字段
    - Set-Cookie
    - Cookie
- 其他：非HTTP的RFC定义的首部</code></pre><ul>
<li>提升传输速率<ul>
<li>压缩传输的内容编码，以下是常用的几种压缩<ul>
<li>gzip (GUN zip)</li>
<li>compress (UNIX系统的标准压缩)</li>
<li>deflate (zlib)</li>
<li>identity (不进行编码)</li>
</ul>
</li>
<li>分割发送的分块传输编码: 将数据分割成多块，能够让浏览器逐步显示页面</li>
</ul>
</li>
<li>发送多种数据的多部分对象集合 Content-type<pre><code>- multipart/form-data: 在Web表单文件上传时使用
- multiparty/byteranges: 状态码206(Partial Content, 部分内容)响应报文包含了多个范围内容时使用
- MIME: (Multipurpose Internet Mail Extensions, 多用途网络邮件扩展)</code></pre></li>
<li>获取部分内容的范围请求 Content-Range 断点续传</li>
<li>内容协商返回最合适的内容<ul>
<li>Accept</li>
<li>Accept-Charset</li>
<li>Accept-Encoding</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>内容协商技术有3种类型：<ul>
<li>服务器驱动协商(Server-driven Negotiation)</li>
<li>客户端驱动协商(Agent-driven Negotiation)</li>
<li>透明协商(Transparent Negotiation)</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3><span id="断点续传">断点续传</span></h3><ul>
<li><p>通过改变现有的业务接口来实现断点续传</p>
</li>
<li><p>不需要改变现有的业务接口进行</p>
<ul>
<li><p>需要考虑的两个重要问题</p>
<ol>
<li>终端知道当前的文件和上一次加载的文件是不是内容发送了变化，如果有变化需要重新从offset 0 的位置开始下载</li>
<li>终端记录好上次成功下载到的offset，告诉server端，server端支持从特定的offset开始吐数据</li>
</ol>
</li>
<li><p>解决以上两个问题的方案</p>
<ol>
<li><p>ETAG字段标识是否内容发生了变化 Nginx &gt; 1.3.3自带ETAG模块</p>
</li>
<li><p>也就是通过前端header中的两个字段来实现</p>
<ul>
<li>Range 指定第一个字节的位置和最后一个字节的位置 (请求头)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Range: (unit&#x3D;first byte pos) - [last byte pos]</span><br></pre></td></tr></table></figure></li>
<li>Content-Range 指定整个实体中的一部分的插入位置，他也指示了整个实体的长度。在服务器向客户端返回一个部分响应，它必须描述响应覆盖的范围和整个实体长度。(响应头)<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Content-Range: bytes (unit first byte pos) - [last byte pos]&#x2F;[entity length]</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ol>
</li>
</ul>
</li>
<li><p>实现例子</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl --header "Range: bytes=0-10000000" http://petkit-img3.oss-cn-hangzhou.aliyuncs.com/img/file/p2_manual_cn -o part1</span><br><span class="line">curl --header "Range: bytes=10000001-11766964" http://petkit-img3.oss-cn-hangzhou.aliyuncs.com/img/file/p2_manual_cn -o part2</span><br><span class="line">cat part1 part2 &gt;&gt; a.pdf</span><br></pre></td></tr></table></figure>

</li>
</ul>
<h3><span id="content-type-mime">Content-Type - MIME</span></h3><ul>
<li>MIME类型就是设定某种扩展名的文件用一种应用程序来打开的方式类型，当该扩展名被访问的时候，浏览器会自动使用指定应用程序来打开。多用于指定一些客户端自定义的文件名，以及一些媒体文件打开方式。</li>
<li>MIME(Multipurpose Internet MailExtensions, 多功能网络邮件扩充服务) 92年诞生之初用于电子邮件系统，后来用于浏览器。<ul>
<li>服务器会将它们发送的多媒体数据的类型告诉浏览器，而通知手段就是说嘛该多媒体数据的MIME类型，让浏览器知道服务器给它的是个什么文件，应该用什么程序或插件来打开它。</li>
<li>浏览器收到文件后，会进入插件系统进行查找，查找出哪种插件可以识别读取接收到的文件。<ul>
<li>如果浏览器找不到所对应的插件，便会提醒用户缺少某插件，或者直接选择某现有插件来试图读取接收到的文件，当然后者可能会导致系统的崩溃。</li>
<li>传输的信息中缺少MIME标识可能导致的情况很难估计，因为某些计算机系统可能不会出现什么故障，但某些计算机可能会因此而崩溃。</li>
</ul>
</li>
<li>每个MIME类型有两部分组成，前面是数据的大类别，列入声音audio、图像image等，后面定义具体的种类；常用的MIME类型有<table>
<thead>
<tr>
<th>类型</th>
<th align="center">后缀</th>
<th align="right">Content-Type</th>
</tr>
</thead>
<tbody><tr>
<td>超文本标记语言文本</td>
<td align="center">.html</td>
<td align="right">text/html</td>
</tr>
<tr>
<td>普通文本</td>
<td align="center">.text</td>
<td align="right">text/plain</td>
</tr>
<tr>
<td>RTF文本</td>
<td align="center">.rtf</td>
<td align="right">application/rtf</td>
</tr>
<tr>
<td>GIF图形</td>
<td align="center">.gif</td>
<td align="right">image/gif</td>
</tr>
<tr>
<td>JPEG图形</td>
<td align="center">.jpeg, .jpg</td>
<td align="right">image/jpeg</td>
</tr>
<tr>
<td>au声音文件</td>
<td align="center">.au</td>
<td align="right">audio/basic</td>
</tr>
<tr>
<td>MIDI音乐文件</td>
<td align="center">.mid, .midi</td>
<td align="right">audio/midi, audio/x-midi</td>
</tr>
<tr>
<td>RealAudio音乐文件</td>
<td align="center">.ra, .ram</td>
<td align="right">audio/x-pn-realaudio</td>
</tr>
<tr>
<td>MPEG文件</td>
<td align="center">.mpg, .mpeg</td>
<td align="right">video/mpeg</td>
</tr>
<tr>
<td>AVI文件</td>
<td align="center">.avi</td>
<td align="right">video/x-msvideo</td>
</tr>
<tr>
<td>GZIP文件</td>
<td align="center">.gz</td>
<td align="right">application/x-gzip</td>
</tr>
<tr>
<td>TAR文件</td>
<td align="center">.tar</td>
<td align="right">application/x-tar</td>
</tr>
</tbody></table>
</li>
<li>MIME信息头有<ul>
<li>MIME-Version 提供了所用MIME的版本号。该值基本为1.0</li>
<li>Content-Type 定义了数据的类型，以便数据能被适当地处理。 注意任何一个二进制附件都应该被叫做application/octet-stream</li>
<li>Content-Transfer-Encoding 它说明了对数据所执行的编码方式，客户端/MUA将用它对附件进行解码。(所有首部字段中最重要的一个)</li>
<li>Content-Description 任何信息段内容的自由文本描述。描述必须使用us-ascii码 (可选字段)</li>
<li>Content-Disposition 实验性字段；用于给客户端/MUA提供提示，来决定是否在行内显示附件或作为单独的附件。</li>
</ul>
</li>
</ul>
</li>
<li>MIME段头（出现在实际的MIME附件部分的头），除了MIME-Version头，可以拥有以上投资端。如果一个MIME头是信息块的一部分，它将作用于整个信息体。如，如果Content-Transfer-Encoding显示在信息(指整个信息)投中，它应用于整个信息体，但是如果它显示在一个MIME段里，那它只能用于那个段中。</li>
</ul>
<p>　　Content-Disposition:<br>　　一个试验性的头，它用于给客户程序/MUA提供提示，来决定是否在行内显示附件或作为单独的附件。<br>　　MIME段头（出现在实际的MIME附件部分的头），除了MIME-Version头，可以拥有以上任何头字段。如果一个MIME头是信息块的一部分，它将作用于整个信息体。例如，如果Content-Transfer-Encoding显示在信息（指整个信息）头中，它应用于整个信息体，但是如果它显示在一个MIME段里，它”只能”用于那个段中.</p>
<h3><span id="参考">参考</span></h3><p><a href="http://www.phperz.com/article/15/1231/179520.html">HTTP/2–HPACK算法</a><br><a href="http://www.wosign.com/news/2016-0202-01.htm">HTTP2.0提速，让网站飞起来-HTTP2.0优势详解</a><br><a href="http://gemantic.iteye.com/blog/1553385">HTML服务器推送技术简介</a><br><a href="http://www.wtoutiao.com/p/id6IWb.html">HTTP2.0服务器推送技术的创新</a><br><a href="http://www.2cto.com/net/201310/252965.html">OSI七层与TCP/IP五层网络架构详解</a><br><a href="http://www.cnblogs.com/Creator/p/5490929.html">HTTP文件断点续传的原理</a><br><a href="http://blog.csdn.net/breeze_life/article/details/8200282">MIME类型Content-Type</a><br><a href="http://www.2cto.com/net/201310/249016.html">TCP/IP协议栈与数据包封装</a></p>
</div><div class="article-tags size-small is-uppercase mb-4"><i class="fas fa-tags has-text-grey"></i> <a class="link-muted mr-2" rel="tag" href="/tags/http/">http</a><p class="text-right font1_1"><time datetime="2020-03-30T18:48:24.237Z"><strong><em> 本文最后修改于: 2020-03-31.</em></strong></time></p></div><ul class="post-copyright"><li><strong>本文标题：</strong><a href="https://blog.dima109.cn/2020/03/29/HTTP协议/">HTTP协议</a></li><li><strong>本文作者：</strong><a href="https://blog.dima109.cn">Dima</a></li><li><strong>本文链接：</strong><a href="https://blog.dima109.cn/2020/03/29/HTTP协议/">https://blog.dima109.cn/2020/03/29/HTTP协议/</a></li><li><strong>版权声明：</strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh" rel="external nofollow" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明出处！</li></ul><div><div class="recommend-post"><span class="is-size-6 has-text-grey has-mr-7"># 推荐文章</span><br><span>  1.<a class="is-size-6" href="/2020/03/31/Hexo%E4%B8%AD%E4%BD%BF%E7%94%A8gitalk%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%E4%B8%AD/" target="_blank">Hexo中使用gitalk遇到的问题(持续更新中)</a><br></span><span>  2.<a class="is-size-6" href="/2020/03/29/HTTP%E5%8D%8F%E8%AE%AE/" target="_blank">HTTP协议</a><br></span></div></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><div class="social-share"></div><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></article></div><!--!--><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/03/31/Hexo%E4%B8%AD%E4%BD%BF%E7%94%A8gitalk%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%E4%B8%AD/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">Hexo中使用gitalk遇到的问题(持续更新中)</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/03/29/hello-world/"><span class="level-item">Hello World</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="comment-container"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@1.6.0/dist/gitalk.css"><script> $.getScript('/js/gitalk.min.js', function () { 
            var gitalk = new Gitalk({
            id: '514cea57a6113e887f9e2747257131b2',
            repo: 'blog_comment',
            owner: 'qmy777',
            clientID: '72a1dab696f58a00e43c',
            clientSecret: '2f914a0a81581a132de2527dee2cc8157f1b1823',
            admin: "qmy777",
            createIssueManually: false,
            distractionFreeMode: true,
            perPage: 10,
            pagerDirection: 'last',
            
            
            enableHotKey: true,
            isLocked: false
        })
        gitalk.render('comment-container')});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="is-rounded" src="https://cdn.jsdelivr.net/gh/qmy777/qmy777.github.io@latest/img/dima109-avatar.jpg" alt="Dima109"></figure><p class="title is-size-4 is-block line-height-inherit">Dima109</p><p class="is-size-6 is-block">我思故我在</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>中国 上海</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">3</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">2</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">3</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/qmy777" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/qmy777"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-white is-marginless" target="_blank" rel="noopener" title="Email" href="/13636305463@163.com"><i class="fa fa-envelope"></i></a></div><div><hr><p id="hitokoto">:D 一言句子获取中...</p><script type="text/javascript" defer>function getYiyan(){
                                $.getJSON("https://v1.hitokoto.cn/", function (data) {
                                if(data){
                                    $('#hitokoto').html("");
                                    $('#hitokoto').append("<strong style='color: #3273dc;'>"+data.hitokoto+"</strong>"+
                                    "<p>"+"来源《"+data.from+"》</p><p>提供者-"+data.creator+"</p>");
                                }});}
                                $(function (){getYiyan();$('#hitokoto').click(function(){getYiyan();})});</script></div></div></div><!--!--><div class="card widget"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content size-small"><p><time dateTime="2020-03-30T17:56:11.000Z">2020-03-31</time></p><p class="title is-6"><a class="link-muted" href="/2020/03/31/Hexo%E4%B8%AD%E4%BD%BF%E7%94%A8gitalk%E9%81%87%E5%88%B0%E7%9A%84%E9%97%AE%E9%A2%98-%E6%8C%81%E7%BB%AD%E6%9B%B4%E6%96%B0%E4%B8%AD/">Hexo中使用gitalk遇到的问题(持续更新中)</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/hexo/">hexo</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-03-29T09:46:15.000Z">2020-03-29</time></p><p class="title is-6"><a class="link-muted" href="/2020/03/29/HTTP%E5%8D%8F%E8%AE%AE/">HTTP协议</a></p><p class="is-uppercase"><i class="fas fa-folder-open has-text-grey"> </i><a class="link-muted" href="/categories/%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/">网络原理</a></p></div></article><article class="media"><div class="media-content size-small"><p><time dateTime="2020-03-29T09:20:20.396Z">2020-03-29</time></p><p class="title is-6"><a class="link-muted" href="/2020/03/29/hello-world/">Hello World</a></p><p class="is-uppercase"></p></div></article></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/categories/hexo/"><span class="level-start"><span class="level-item">hexo</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile is-marginless" href="/categories/%E7%BD%91%E7%BB%9C%E5%8E%9F%E7%90%86/"><span class="level-start"><span class="level-item">网络原理</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile is-marginless" href="/archives/2020/03/"><span class="level-start"><span class="level-item">三月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li></ul></div></div></div><div class="card widget"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/gitalk/"><span class="tag">gitalk</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/hexo/"><span class="tag">hexo</span><span class="tag is-grey-lightest">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/http/"><span class="tag">http</span><span class="tag is-grey-lightest">1</span></a></div></div></div></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="https://cdn.jsdelivr.net/gh/qmy777/qmy777.github.io@latest/img/dima109-logo.png" alt="Dima109" height="28"></a><p class="size-small"><span>&copy; 2020 Dima</span>  Powered by <a href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank">Icarus</a>,Modify by <a href="https://github.com/removeif" target="_blank">removeif</a> <br>© 版权说明：[本网站所有内容均收集于互联网或自己创作,<br>    方便于网友与自己学习交流，如有侵权，请<a href="/message" target="_blank">留言</a>，立即处理]<br><script type="text/javascript" src="/js/statistics.js"></script><span id="statistic-times">网站运行时间统计加载中...</span><br><div class="size-small"><span id="busuanzi_container_site_uv">❤️感谢<strong> <span id="busuanzi_value_site_uv">99+</span> </strong></span>小伙伴的<strong> <span id="busuanzi_value_site_pv">99+</span> </strong>次光临，查看💐<a href="https://github.com/removeif/hexo-theme-amazing" target="_blank">主题源码</a>！❤️</div></p></div><div class="level-end"><div class="field has-addons"><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Attribution 4.0 International" href="https://creativecommons.org/licenses/by/4.0/"><i class="fab fa-creative-commons-by"></i></a></p><p class="control"><a class="button is-transparent is-large" target="_blank" rel="noopener" title="Download on GitHub" href="https://github.com/qmy777"><i class="fab fa-github"></i></a></p></div></div><div class="sideMusic"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.css"><script src="https://cdn.jsdelivr.net/npm/aplayer/dist/APlayer.min.js"></script><script src="https://cdn.jsdelivr.net/npm/meting@2/dist/Meting.min.js"></script><meting-js style="width: auto;height: 2000px;" server="netease" type="playlist" id="167900089" theme="#2980b9" loop="all" autoplay="false" order="list" storageName="aplayer-setting" lrctype="0" list-max-height="400px" fixed="true"></meting-js></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            site: {
                url: 'https://blog.dima109.cn',
                external_link: {"enable":true,"exclude":[]}
            },
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" defer></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back-to-top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.12/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><script src="/js/comment-issue-data.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-input-wrapper"><form class="search-form"><input class="searchbox-input" name="wd" type="text" placeholder="想要查找什么..."><span class="searchbox-close searchbox-selectable"><i class="fa fa-times-circle"></i></span></form></div></div></div><script>(function ($) {
            $('.search-form').on('submit', function (e) {
                var keyword = $('.searchbox-input[name="wd"]').val();
                window.location = 'https://www.baidu.com/s?wd=site:blog.dima109.cn ' + keyword;
                return false;
            });
        })(jQuery);
        (function (document, $) {
            $(document).on('click', '.navbar-main .search', function () {
                $('.searchbox').toggleClass('show');
            }).on('click', '.searchbox .searchbox-mask', function () {
                $('.searchbox').removeClass('show');
            }).on('click', '.searchbox-close', function () {
                $('.searchbox').removeClass('show');
            });
        })(document, jQuery);</script><script src="https://cdn.jsdelivr.net/npm/pjax@0.2.8/pjax.js"></script><script type="text/javascript">var pjax = new Pjax({
            elements: "a",//代表点击链接就更新
            selectors: [  //代表要更新的节点
                ".section",
                "title"
            ],
            cache: true
        })

        function loadBusuanzi(){
        $.getScript("//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js", function () {});
        }

        // 开始 PJAX 执行的函数
        document.addEventListener('pjax:send', function () {
        });
        
        // PJAX 完成之后执行的函数，可以和上面的重载放在一起
        document.addEventListener('pjax:complete', function () {
            $(".section").css({opacity:1});
            loadIssueData();
            if(false){
                loadMathJax();
            }
            loadMainJs(jQuery, window.moment, window.ClipboardJS, window.IcarusThemeSettings);
            loadBackTop();
            loadBusuanzi();
        });</script></body></html>